\clearpage
\subsection{Quaternions}
ในบางครั้งหรือบางกรณี Euler angles อาจจะทำให้เกิด Gimbal lock ได้
ซึ่งจะทำให้การควบคุมเสียไป 1 องศาอิสระ เพื่อที่จะหลีกเลี่ยงเหตุการณ์นี้จึงได้นำ quaternions มาใช้
quaternions ใช้เพื่อที่จะบอกมุมเอียงของวัตถุใดๆ ได้เหมือนกับ Euler angles
โดยที่เราสามารถแปลง Euler angles ให้เป็น quaternions ได้จากสมการที่ \ref{equ:euler2quat}

\begin{equation}
    {\begin{bmatrix} 
    q_1 \\ q_2 \\ q_3 \\ q_4
    \end{bmatrix} = \begin{bmatrix}
        c(\frac{\phi}{2})c(\frac{\theta}{2})c(\frac{\psi}{2})
        + s(\frac{\phi}{2})s(\frac{\theta}{2})s(\frac{\psi}{2}) \\[10pt]
        s(\frac{\phi}{2})c(\frac{\theta}{2})c(\frac{\psi}{2})
        + c(\frac{\phi}{2})s(\frac{\theta}{2})s(\frac{\psi}{2}) \\[10pt]
        c(\frac{\phi}{2})s(\frac{\theta}{2})c(\frac{\psi}{2})
        + s(\frac{\phi}{2})c(\frac{\theta}{2})s(\frac{\psi}{2}) \\[10pt]
        c(\frac{\phi}{2})c(\frac{\theta}{2})s(\frac{\psi}{2})
        + s(\frac{\phi}{2})s(\frac{\theta}{2})c(\frac{\psi}{2}) \\
		\end{bmatrix}}
	\label{equ:euler2quat}
\end{equation}

และเราสามารถที่จะเขียนแมทริกการหมุนให้อยู่ในรูปของ quaternions ได้ดังสมการที่ \ref{equ:quat2rot}
\begin{equation}
    {R_{zyx}(\phi,\theta,\psi) = \begin{bmatrix}
        q_1^2+q_2^2-q_3^2-q_4^2 & 2(q_2q_3-q_1q_4) & 2(q_1q_3+q_2q_4) \\[10pt]
        2(q_2q_3+q_1q_4) & q_1^2-q_2^2+q_3^2-q_4^2 & 2(q_3q_4-q_1q_2) \\[10pt]
        2(q_2q_4-q_1q_3) & 2(q_1q_2-q_3q_4) & q_1^2-q_2^2-q_3^2+q_4^2  \\
       \end{bmatrix}}
	\label{equ:quat2rot}
\end{equation}